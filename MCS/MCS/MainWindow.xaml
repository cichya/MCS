<Window x:Class="MCS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MCS"
		xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
		xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Platform"
		xmlns:converters="clr-namespace:MCS.Converters"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800"
		DataContext="{Binding Source={StaticResource Locator}, Path=Main}">
	<Window.Resources>
		<ResourceDictionary>
			<converters:DataGridCellEditEndingEventArgsToPersonForListDtoConverter x:Key="DataGridCellEditEndingEventArgsToPersonForListDtoConverter"/>
			<Style x:Key="NewPersonDataGridRow" TargetType="{x:Type DataGridRow}">
				<Setter Property="BorderBrush" Value="Green" />
				<Setter Property="BorderThickness" Value="1" />
			</Style>
		</ResourceDictionary>
	</Window.Resources>

	<StackPanel>
		<DataGrid ItemsSource="{Binding People}" MinHeight="255" AutoGenerateColumns="False" CanUserAddRows="False">
			<i:Interaction.Triggers>
				<i:EventTrigger EventName="CellEditEnding">
					<cmd:EventToCommand PassEventArgsToCommand="True" Command="{Binding EditPersonRowCommand}"/>
				</i:EventTrigger>
			</i:Interaction.Triggers>
			<DataGrid.RowStyle>
				<Style TargetType="{x:Type DataGridRow}">
					<Style.Triggers>
						<DataTrigger Binding="{Binding IsNew}"
                                 Value="True">
							<Setter Property="BorderBrush" Value="Green" />
							<Setter Property="BorderThickness" Value="1" />
						</DataTrigger>
						<DataTrigger Binding="{Binding IsEdited}"
                                 Value="True">
							<Setter Property="BorderBrush" Value="Blue" />
							<Setter Property="BorderThickness" Value="1" />
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</DataGrid.RowStyle>
			<DataGrid.Columns>
				<DataGridTextColumn Header="Lp." Binding="{Binding Id}" Width="auto"/>
				<DataGridTextColumn Header="FirstName" Binding="{Binding FirstName}" Width="auto"/>
				<DataGridTextColumn Header="LastName" Binding="{Binding LastName}" Width="auto"/>
				<DataGridTextColumn Header="StreetName" Binding="{Binding StreetName}" Width="auto"/>
				<DataGridTextColumn Header="HouseNumber" Binding="{Binding HouseNumber}" Width="auto"/>
				<DataGridTextColumn Header="ApartmentNumber" Binding="{Binding ApartmentNumber}" Width="auto"/>
				<DataGridTextColumn Header="PostalCode" Binding="{Binding PostalCode}" Width="auto"/>
				<DataGridTextColumn Header="PhoneNumber" Binding="{Binding PhoneNumber}" Width="auto"/>
				<DataGridTextColumn Header="BirthDate" Binding="{Binding BirthDate}" Width="auto"/>
				<DataGridTextColumn Header="Age" Binding="{Binding Age}" Width="auto" IsReadOnly="True" />
			</DataGrid.Columns>
		</DataGrid>
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition/>
				<ColumnDefinition/>
				<ColumnDefinition/>
			</Grid.ColumnDefinitions>
			<Button Command="{Binding AddNewPersonRowCommand}" Content="Add new person" />
		</Grid>
	</StackPanel>
</Window>
